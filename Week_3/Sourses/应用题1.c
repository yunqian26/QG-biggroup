#include <stdio.h>

/*
题目：现给定一个长度为N的数组，里面存有值0,1或2，请编写一个函数，只能使用一个单层for循环，将其从小到大进行排序 
*/ 

/*
所给思路：思路：使用两个索引控制0和2的放置位置，再用一个索引进行遍历，遇到0或2时与索引对应位置进行交换，并再检查一次
交换过来的值是否需要再放置，直到p1与p2相遇则结束
*/ 

//交换数 
void swap(int *a, int *b) {
    int temp = *a;
    *a = *b;
    *b = temp;
}

//打印
printArr(int arr[],int n){
	int i;
    for (i = 0; i < n; i++) {
        printf("%d ", arr[i]);
    }
    putchar('\n');
} 

// 排序函数，实现对只包含0、1、2的数组进行排序
// 参数arr是待排序的数组，n是数组的长度
void sortArray(int arr[], int n) {
    // p0用来标记0应该放置的位置，初始指向数组开头
    int p0 = 0;  
    // p2用来标记2应该放置的位置，初始指向数组末尾
    int p2 = n - 1;  
    // p1用于遍历数组，从数组开头开始
    int p1 = 0;  

    // 只要p1不超过p2，就继续循环
    while (p1 <= p2) {
        // 如果当前位置p1的元素是0
        if (arr[p1] == 0) {
            // 把这个0和p0位置的元素交换，这样0就放到了合适的位置
            swap(&arr[p1], &arr[p0]);
            // 因为0已经放好，p0往后移一位，准备标记下一个0该放的位置
            p0++;
            // p1也往后移一位，继续检查下一个元素
            p1++;
        } 
        // 如果当前位置p1的元素是2
        else if (arr[p1] == 2) {
            // 把这个2和p2位置的元素交换，让2放到合适的位置
            swap(&arr[p1], &arr[p2]);
            // 因为2已经放好，p2往前移一位，准备标记下一个2该放的位置
            p2--;
            // 这里p1不移动，因为交换过来的值还没检查，可能还需要调整位置
        } 
        // 如果当前位置p1的元素是1，1已经在0和2中间合适的位置，不需要交换
        else {
            // 直接让p1往后移一位，继续检查下一个元素
            p1++;
        }
    }
}

int main() {
    int arr[] = {1, 2, 1, 0, 2, 0, 0};
    int n = sizeof(arr) / sizeof(arr[0]);
    //排序 
    sortArray(arr, n);
    printArr(arr,n);
    system("pause");
    return 0;
}
